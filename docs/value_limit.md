# SQLデータ型で使用可能な値

2022-10-20 kurosawa

## この文書について

SQL実行エンジンにおいて使用可能なデータ型の値の範囲について記述する

## データ型と範囲

SQL実行エンジンがサポートするデータ型とその値のとりえる範囲について下表に示す

| SQLデータ型 | 使用可能な値 | 備考 |
|:--|:--|:--|
| `BOOLEAN` | `FALSE`/`TRUE` | | 
 `TINYINT` | 範囲 `[-128, 127]` の整数 | |
| `SMALLINT` | 範囲 `[-32768, 32767]` の整数 | |
| `INT` | 範囲 `[-2147483648, 2147483647]` の整数  | |
| `BIGINT` | 範囲 `[-9223372036854775808, 9223372036854775807]` の整数  | |
| `REAL` | 範囲 `[-3.40282e+38, 3.40282e+38]`の浮動小数点数(IEEE 754規定による) <br> `INF` , `-INF` , `NaN` , `+0` , `-0` を含む | 正の最小値: `1.17549e-38` <br> 負の最大値: `-1.17549e-38` |
| `DOUBLE` | 範囲 `[-1.79769e+308, 1.79769e+308]` の浮動小数点数(IEEE 754規定による) <br> `INF` , `-INF` , `NaN` , `+0` , `-0` を含む<br>  | 正の最小値: `2.22507e-308` <br> 負の最大値: `-2.22507e-308` |
| `DECIMAL(p,s)` | 範囲 `[-(10^p-1)*10^(-s), (10^p-1)*10^(-s)]` の十進数で精度(有効桁数) `p`, スケール(小数部桁数) `s`のもの | 精度・スケールが指定されたDECIMAL型 <br> 指定可能な`p`の範囲は `[0, 38]`, `s`の範囲は `[0, p]`. |
| `DECIMAL(*,s)` | スケール `s` の十進数でunscaled value (*1)が範囲 `[-340282366920938463463374607431768211455,  340282366920938463463374607431768211455]` のもの | 任意精度のDECIMAL型 | 
| `DECIMAL(*,*)` | 任意のスケールを持つ十進数でunscaled value (*1)が範囲 `[-340282366920938463463374607431768211455,  340282366920938463463374607431768211455]` のもの | 任意精度・任意スケールのDECIMAL型 |
| `CHAR(n)` | UTF-8で `n` 文字の文字列 | 値が`n`文字に満たない場合はパディングされる. `n` の最大値は規定なし (*2). |
| `VARCHAR(n)` | UTF-8で長さが `[0, n]` 文字の文字列 |  `n` の最大値は規定なし (*2). 任意長の指定も可能 (*4). |
| `BINARY(n)` | `n` オクテットのバイナリ列  | 値が `n` オクテットに満たない場合はパディングされる. `n` の最大値は規定なし (*2) |
| `BINARY VARYING(n)` <br> `VARBINARY(n)` | 長さが `[0, n]` オクテットのバイナリ列 | `n` の最大値は規定なし (*2). 任意長の指定も可能(*4). |
| `DATE` | 範囲 `[-999,999,999/01/01, 999,999,999/12/31]` の日付 | | 
| `TIME` | 範囲 `[00:00:00.000000000, 23:59:59.999999999]` の時刻 (精度: ナノ秒) | | 
| `TIME WITH TIME ZONE` | 範囲 `[00:00:00.000000000, 23:59:59.999999999]`の時刻部分 (精度: ナノ秒) と <br> 範囲 `[-1440, 1440]` のオフセット部分(精度: 分)からなるタイムゾーンオフセットつき時刻 | | 
| `TIMESTAMP` | 範囲 `[-292277022657/01/27 08:29:52.000000000, 292277026596/12/04 15:30:07.999999999]` の日付つき時刻 (精度: ナノ秒) | (*3) | 
| `TIMESTAMP WITH TIME ZONE` | 範囲 `[-292277022657/01/27 08:29:52.000000000, 292277026596/12/04 15:30:07.999999999]` の日付つき時刻部分 (精度: ナノ秒) と <br> 範囲 `[-1440, 1440]` のオフセット部分(精度: 分)からなるタイムゾーンオフセットつき日付つき時刻 | (*3) | 
| `INTERVAL` |-| サポート予定だが詳細はTBD |
| `ARRAY` |-|サポート予定だが詳細はTBD |
| `ROW` |-| サポート予定だが詳細はTBD |

記法：範囲 `[a, b]` は端点 `a`, `b` を含む(閉区間)

(*1) 小数部の桁数が `s` の十進数 `d`は符号付整数 `x`によって `d = 10 ^ (-s)` と表される. このときの `x` をunscaled valueと呼ぶ。 (参考: Java BigDecimal)

(*2) 現状では明示的な制限はないが将来制限が設定される可能性がある

(*3) 日付つき時刻の範囲は `1970-1-1 00:00:00` 起点の経過秒数が符号付き64ビット整数で表現可能なものに由来する

(*4) パラメーター `n` に `*` を指定すると任意長の指定となり、上限がないものとして扱われる



